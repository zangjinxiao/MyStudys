<!--
/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2008 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

Name:				index.html
Author:				John Huan Vu
					Photoshop Engineering Intern
					Adobe Systems Incorporated
Description:		The index file describes the overall picture of the Adobe
					Photoshop Panel Developer's Guide for other developers to use
					and make using Adobe Flex Builder.
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Adobe Photoshop Panel Developer's Guide</title>

<link href="style.css" rel="stylesheet" type="text/css" />
</head>

<body class="twoColLiqLt">
<div id="container">
  <div id="sidebar1">
    <h4>Table of Contents</h4>
    <span class = "toc_links">
		<a href="index.html">Introduction</a><br/>
    	<a href="who.html">Who Should Read This?</a><br/>
		<a href="howDoesItWork.html">How Does It Work?</a><br/>
		<a href="download.html">Download(s)</a><br/>
		<a href="requirements.html">System and Software Requirements</a><br/>
		<a href="psReservedWords.html">Adobe Photoshop Reserved Words</a><br/>
		<br />
		Tutorials<br />
		<a href="tutorial_overview.html">Overview</a>
    	<ol>
			<li><a href="startingFlexProject.html">Starting a Flex Project</a></li>
			<li><a href="helloworld.html">Hello World Panel</a></li>
			<li><a href="csxsfile.html">Placing the CSXS Library</a></li>
			<br />
			<li><a href="shortcutbuttons.html">Shortcut Buttons Panel</a>
			<ol type="a">
				<li><a href="shortcutbuttons_javascript.html">JavaScript</a></li>
				<li><a href="shortcutbuttons_design.html">Design the Panel</a></li>
				<li><a href="shortcutbuttons_actionscript.html">ActionScript</a></li>
				<li><a href="shortcutbuttons_persistent.html">Photoshop Persistent</a></li>
				<li><a href="shortcutbuttons_air.html">CSXS Logger AIR Debugger (Optional)</a></li>
			</ol>
			</li>
			<br />
			<li><a href="scriptlistener.html">Setting Up Script Listener</a></li>
			<br />
			<li><a href="colorpicker.html">Color Picker Panel</a></li>
			<ol type="a.html">
				<li><a href="colorpicker_javascript.html">JavaScript</a></li>
				<li><a href="colorpicker_design.html">Design the Panel</a></li>
				<li><a href="colorpicker_characterID.html">Find Character ID Code to Register Events</a></li>
				<li><a href="colorpicker_actionscript.html">ActionScript</a></li>
				<li><a href="colorpicker_icons.html">Create Custom Icons</a></li>
			</ol>
			<br />
			<li><a href="flickr.html">Flickr Search Panel</a></li>
			<ol type="a.html">
				<li><a href="flickr_design.html">Design the Panel</a></li>
				<li><a href="flickr_actionscriptFlickr.html">Create a Flickr Service</a></li>
				<li><a href="flickr_createThumbnailModule.html">Design a Custom Module</a></li>
				<li><a href="flickr_actionscriptEnvironment.html">Modify Panel's Properties</a></li>
				<li><a href="flickr_actionscriptAppOnline.html">Connect on Preferences</a></li>
			</ol>
			<br />
			<li><a href="perLayer.html">Per Layer Metadata Panel</a></li>
			<ol type="a.html">
				<li><a href="perLayer_metadata.html">View Metadata</a></li>
				<li><a href="perLayer_javascript.html">JavaScript</a></li>
				<li><a href="perLayer_characterID.html">Find Character ID Code to Register Events</a></li>
				<li><a href="perLayer_design.html">Designing the Panel</a></li>
				<li><a href="perLayer_actionscript.html">ActionScript</a></li>
				<li><a href="perLayer_photomerge.html">Using Photomerge</a></li>
			</ol>
    	</ol>
	 	<a href="otherSamples.html">Other Samples</a> <br/>
	 	<a href="bestPractices.html">Best Practices</a><br />
		<a href="faq.html">Frequently Asked Questions</a><br />
		<a href="acronyms.html">Acronyms and Definitions</a><br />
		<a href="links.html">Links</a>
		</span>
	</div>
  <div id="mainContent">
    <span class="main_title">Adobe<sup>&reg;</sup> Photoshop<sup>&reg;</sup> Panel Developer's Guide</span>
	<hr />
    <h1>Per Layer Metadata Panel: Find Character ID Code to Register Events</h1>
    <p>The third part of the Per Layer Metadata Panel is finding the character ID code associated with actions/events in Adobe Photoshop. The actions/events that the developer will obtain is opening an image, converting the background layer to a regular layer, creating a new layer, selecting a different layer, and converting a regular layer to a background layer. The result is a JavaScript (JSX) output log showing the functions and character ID code of the actions/events committed by the user.
    <p><u>Instructions</u>: </p>
    <ol>
		<li>Complete <a href="scriptlistener.html">Setting Up Script Listener</a>.</li>
    	<li>Open <b>Adobe Photoshop</b>.</li>
    	<li>Open <b>PerLayerMetadataMiddle.jpg</b> under the <b>samples\sample pictures</b> folder included with the Adobe Photoshop Panel Developer's Guide.</li>
    	<li>Go to <b>Layer &gt; New &gt; Layer from Background...</b>.</li>
    	<li>Under <b>Name:</b>, type in <b>Original</b> and press <b>OK</b>. <br />
				<img src="../images/PerLayer_NewLayerFromBackground.jpg" /></li>
    	<li>Go to <b>Layer &gt; New &gt; Layer...</b>.</li>
    	<li>Under <b>Name:</b>, type in <b>New Layer</b> and press <b>OK</b>. <br />
				<img src="../images/PerLayer_NewLayer.jpg" /></li>
    	<li>Go to the <b>Layers Panel</b> or go to <b> Window &gt; Layers</b> or press <b>F7</b>.</li>
    	<li>Select the layer called <b>Original</b><br />
				<img src="../images/PerLayer_LayersPanelOriginalSelected.jpg" /></li>
    	<li>Go to <b>Layer &gt; New &gt; Background from Layer</b>.</li>
    	<li>Close <b>Adobe Photoshop</b>.</li>
    	<li>Open <b>ScriptingListenerJS.log</b> on the <b>Desktop</b> with a text editor.</li>
    	<li>The code within <b>ScriptingListenerJS.log</b> should be similar to below:
    		<pre>
// =======================================================
var idOpn = charIDToTypeID( &quot;Opn &quot; );
    var desc1 = new ActionDescriptor();
    var idnull = charIDToTypeID( &quot;null&quot; );
    desc1.putPath( idnull, new File( &quot;~/samples/sample pictures/PerLayerMetadataMiddle.JPG&quot; ) );
executeAction( idOpn, desc1, DialogModes.NO );

// =======================================================
var idsetd = charIDToTypeID( &quot;setd&quot; );
    var desc2 = new ActionDescriptor();
    var idnull = charIDToTypeID( &quot;null&quot; );
        var ref1 = new ActionReference();
        var idLyr = charIDToTypeID( &quot;Lyr &quot; );
        var idBckg = charIDToTypeID( &quot;Bckg&quot; );
        ref1.putProperty( idLyr, idBckg );
    desc2.putReference( idnull, ref1 );
    var idT = charIDToTypeID( &quot;T   &quot; );
        var desc3 = new ActionDescriptor();
        var idNm = charIDToTypeID( &quot;Nm  &quot; );
        desc3.putString( idNm, &quot;Original&quot; );
        var idOpct = charIDToTypeID( &quot;Opct&quot; );
        var idPrc = charIDToTypeID( &quot;#Prc&quot; );
        desc3.putUnitDouble( idOpct, idPrc, 100.000000 );
        var idMd = charIDToTypeID( &quot;Md  &quot; );
        var idBlnM = charIDToTypeID( &quot;BlnM&quot; );
        var idNrml = charIDToTypeID( &quot;Nrml&quot; );
        desc3.putEnumerated( idMd, idBlnM, idNrml );
    var idLyr = charIDToTypeID( &quot;Lyr &quot; );
    desc2.putObject( idT, idLyr, desc3 );
executeAction( idsetd, desc2, DialogModes.NO );

// =======================================================
var idMk = charIDToTypeID( &quot;Mk  &quot; );
    var desc4 = new ActionDescriptor();
    var idnull = charIDToTypeID( &quot;null&quot; );
        var ref2 = new ActionReference();
        var idLyr = charIDToTypeID( &quot;Lyr &quot; );
        ref2.putClass( idLyr );
    desc4.putReference( idnull, ref2 );
    var idUsng = charIDToTypeID( &quot;Usng&quot; );
        var desc5 = new ActionDescriptor();
        var idNm = charIDToTypeID( &quot;Nm  &quot; );
        desc5.putString( idNm, &quot;New Layer&quot; );
    var idLyr = charIDToTypeID( &quot;Lyr &quot; );
    desc4.putObject( idUsng, idLyr, desc5 );
executeAction( idMk, desc4, DialogModes.NO );

// =======================================================
var idslct = charIDToTypeID( &quot;slct&quot; );
    var desc6 = new ActionDescriptor();
    var idnull = charIDToTypeID( &quot;null&quot; );
        var ref3 = new ActionReference();
        var idLyr = charIDToTypeID( &quot;Lyr &quot; );
        ref3.putName( idLyr, &quot;Original&quot; );
    desc6.putReference( idnull, ref3 );
    var idMkVs = charIDToTypeID( &quot;MkVs&quot; );
    desc6.putBoolean( idMkVs, false );
executeAction( idslct, desc6, DialogModes.NO );

// =======================================================
var idMk = charIDToTypeID( &quot;Mk  &quot; );
    var desc7 = new ActionDescriptor();
    var idnull = charIDToTypeID( &quot;null&quot; );
        var ref4 = new ActionReference();
        var idBckL = charIDToTypeID( &quot;BckL&quot; );
        ref4.putClass( idBckL );
    desc7.putReference( idnull, ref4 );
    var idUsng = charIDToTypeID( &quot;Usng&quot; );
        var ref5 = new ActionReference();
        var idLyr = charIDToTypeID( &quot;Lyr &quot; );
        var idOrdn = charIDToTypeID( &quot;Ordn&quot; );
        var idTrgt = charIDToTypeID( &quot;Trgt&quot; );
        ref5.putEnumerated( idLyr, idOrdn, idTrgt );
    desc7.putReference( idUsng, ref5 );
executeAction( idMk, desc7, DialogModes.NO );
		</pre>
				<p> <u>Code Walkthrough</u>: There are five parts of the code generated by actions/events made in Adobe Photoshop: </p>
    		<ol>
					<li>Open the PerLayerMetadataMiddle.jpg file under the samples\sample pictures folder.</li>
    			<li>Convert the background layer to a layer called Original.</li>
    			<li>Make a new layer called New Layer.</li>
    			<li>Select the layer called Original.</li>
    			<li>Make the layer called Original to a background layer.</li>
    			</ol>
    		<br />
    		There is a special four character ID code placed as a parameter of the function <code>charIDToTypeID</code> found on the first line of each part of the code. The character ID key to call the actions/events described earlier are <code>Opn</code>, <code>setd</code>, <code>Mk</code>, and <code>slct</code>.  The two character ID code will be used later in the tutorial.<br />
    		<i>Note: Other actions or events could also contain the <code>Opn</code>, <code>setd</code>, <code>Mk</code>, and <code>slct</code> parameter although a different block of code is produced. </i>
    		</p>
		</li>
    	<li>Close the text editor.</li>
    	</ol>
        <span class="nextLink">Continue to <a href="perLayer_design.html">Designing the Panel</a></span>
  </div>
	<br class="clearfloat" />
</div>
</body>
</html>
