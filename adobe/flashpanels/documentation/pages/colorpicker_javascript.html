<!--
/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2008 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

Name:				index.html
Author:				John Huan Vu
					Photoshop Engineering Intern
					Adobe Systems Incorporated
Description:		The index file describes the overall picture of the Adobe
					Photoshop Panel Developer's Guide for other developers to use
					and make using Adobe Flex Builder.
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Adobe Photoshop Panel Developer's Guide</title>

<link href="style.css" rel="stylesheet" type="text/css" />
</head>

<body class="twoColLiqLt">
<div id="container">
  <div id="sidebar1">
    <h4>Table of Contents</h4>
    <span class = "toc_links">
		<a href="index.html">Introduction</a><br/>
    	<a href="who.html">Who Should Read This?</a><br/>
		<a href="howDoesItWork.html">How Does It Work?</a><br/>
		<a href="download.html">Download(s)</a><br/>
		<a href="requirements.html">System and Software Requirements</a><br/>
		<a href="psReservedWords.html">Adobe Photoshop Reserved Words</a><br/>
		<br />
		Tutorials<br />
		<a href="tutorial_overview.html">Overview</a>
    	<ol>
			<li><a href="startingFlexProject.html">Starting a Flex Project</a></li>
			<li><a href="helloworld.html">Hello World Panel</a></li>
			<li><a href="csxsfile.html">Placing the CSXS Library</a></li>
			<br />
			<li><a href="shortcutbuttons.html">Shortcut Buttons Panel</a>
			<ol type="a">
				<li><a href="shortcutbuttons_javascript.html">JavaScript</a></li>
				<li><a href="shortcutbuttons_design.html">Design the Panel</a></li>
				<li><a href="shortcutbuttons_actionscript.html">ActionScript</a></li>
				<li><a href="shortcutbuttons_persistent.html">Photoshop Persistent</a></li>
				<li><a href="shortcutbuttons_air.html">CSXS Logger AIR Debugger (Optional)</a></li>
			</ol>
			</li>
			<br />
			<li><a href="scriptlistener.html">Setting Up Script Listener</a></li>
			<br />
			<li><a href="colorpicker.html">Color Picker Panel</a></li>
			<ol type="a.html">
				<li><a href="colorpicker_javascript.html">JavaScript</a></li>
				<li><a href="colorpicker_design.html">Design the Panel</a></li>
				<li><a href="colorpicker_characterID.html">Find Character ID Code to Register Events</a></li>
				<li><a href="colorpicker_actionscript.html">ActionScript</a></li>
				<li><a href="colorpicker_icons.html">Create Custom Icons</a></li>
			</ol>
			<br />
			<li><a href="flickr.html">Flickr Search Panel</a></li>
			<ol type="a.html">
				<li><a href="flickr_design.html">Design the Panel</a></li>
				<li><a href="flickr_actionscriptFlickr.html">Create a Flickr Service</a></li>
				<li><a href="flickr_createThumbnailModule.html">Design a Custom Module</a></li>
				<li><a href="flickr_actionscriptEnvironment.html">Modify Panel's Properties</a></li>
				<li><a href="flickr_actionscriptAppOnline.html">Connect on Preferences</a></li>
			</ol>
			<br />
			<li><a href="perLayer.html">Per Layer Metadata Panel</a></li>
			<ol type="a.html">
				<li><a href="perLayer_metadata.html">View Metadata</a></li>
				<li><a href="perLayer_javascript.html">JavaScript</a></li>
				<li><a href="perLayer_characterID.html">Find Character ID Code to Register Events</a></li>
				<li><a href="perLayer_design.html">Designing the Panel</a></li>
				<li><a href="perLayer_actionscript.html">ActionScript</a></li>
				<li><a href="perLayer_photomerge.html">Using Photomerge</a></li>
			</ol>
    	</ol>
	 	<a href="otherSamples.html">Other Samples</a> <br/>
	 	<a href="bestPractices.html">Best Practices</a><br />
		<a href="faq.html">Frequently Asked Questions</a><br />
		<a href="acronyms.html">Acronyms and Definitions</a><br />
		<a href="links.html">Links</a>
		</span>
	</div>
  <div id="mainContent">
    <span class="main_title">Adobe<sup>&reg;</sup> Photoshop<sup>&reg;</sup> Panel Developer's Guide</span>
	<hr />
    <h1>Color Picker Panel: JavaScript</h1>
    <p>The first part of the Color Picker Panel is creating a JavaScript file. The JavaScript file will have functions to set and get the foreground color and set and get the background color. The JavaScript file will have a utility functions to convert an color integer value sent by the SWF file to red, green, and blue values for variable type Solid Color. Another important utility function in the JavaScript file is creating an XML object of the property and value to be sent to the SWF file. The JavaScript file will be created using ExtendScript Toolkit. The result is to place the JavaScript file into the Adobe Photoshop Panels folder for the SWF file to communicate with. Please refer to the <a href="www.adobe.com/devnet/Photoshop/pdfs/Photoshop_cs3_javascript_ref.pdf" target="_blank">Adobe Photoshop CS3 Javascript Reference</a> for the Application Programming Interface (API).</p>
    <p>Go to  <a href="../jsdocs/overview-summary-ColorPicker.jsx.html" target="_blank"> Color Picker Panel's JavaScript API</a> that covers a summary of functions and scripts used.</p>
    <p><u>Instructions</u>: </p>
    <ol>
		<li>Open <b>ExtendScript Toolkit</b>.</li>
    	<li>Go to <b>File &gt; New JavaScript</b>.</li>
    	<li>Copy the following JavaScript code into the file:</li>
    	<pre>
function setForeground(color){
   app.foregroundColor = translateColor(color);
}
<br />
function getForeground(){
   xml = &quot;&lt;object&gt;&quot;;
   xml += convertToXML(app.foregroundColor.rgb.hexValue.toString(), &quot;foreground&quot;);
   xml += &quot;&lt;/object&gt;&quot;
   return xml;
}
<br />
function setBackground(color){
   app.backgroundColor = translateColor(color);
}
<br />
function getBackground(){
   xml = &quot;&lt;object&gt;&quot;;
   xml += convertToXML(app.backgroundColor.rgb.hexValue.toString(), &quot;background&quot;);
   xml += &quot;&lt;/object&gt;&quot;
   return xml;
}
	</pre>
		<p><u>Code Walkthrough</u>: The two functions, <code>setForeground</code> and <code>setBackground</code>, respectively set Adobe Photoshop's background and foreground color by taking an integer  parameter <code>color</code> from the Color Picker Panel. The two functions, <code>getForeground</code> and <code>getBackground</code>, respectively retrieve the Adobe Photoshop's foreground and background color respectively by returning an XML object understood by the  Color Picker Panel.</p>
    	<li>Copy and append the following JavaScript utility code into the file:
    		<pre>
function translateColor(c){
   var color = new SolidColor;
   color.rgb.red	 = (c &gt;&gt; 16) &amp; 0xFF;
   color.rgb.green = (c &gt;&gt; 8) &amp; 0xFF;
   color.rgb.blue	 = c &amp; 0xFF;
   return color;
}
<br />
function convertToXML(property, identifier){
   var type = typeof property;
   var xml = '&lt;property id = &quot;' + identifier + '&quot; &gt;';
   
   switch(type){
      case &quot;number&quot;:
         xml += &quot;&lt;number&gt;&quot;;
         xml += property.toString();
         xml += &quot;&lt;/number&gt;&quot;;
         break;
      case &quot;boolean&quot;:
         xml += &quot;&lt;&quot; + property.toString() + &quot;/&gt;&quot;;
         break;
      case &quot;string&quot;:
         xml += &quot;&lt;string&gt;&quot;;
         xml += property.toString();
         xml += &quot;&lt;/string&gt;&quot;;
         break;
      case &quot;object&quot;:
         // Object case is currently not supported
         alert(&quot;Object case is currently not supported&quot;);
         //xml += &quot;&lt;object&gt;&quot;;
         //for(var i in property)
         //   xml += convertToXML(property[i], 
         //xml += &quot;&lt;/object&gt;&quot;;
         break;
      case &quot;undefined&quot;:
         xml += &quot;&lt;string&gt;undefined&lt;/string&gt;&quot;;
         break;
      default:
         alert(&quot;Type &quot; + type + &quot; is unknown.&quot;);
         return &quot;&quot;;
   }
   xml += '&lt;/property&gt;';
   return xml;
}
		</pre>
    		</li>
    	<p><u>Code Walkthrough</u>: The function <code>translateColor</code> takes in an integer value <code>c</code> and translates to red, green, and blue values into <code>SolidColor</code> named <code>color</code>. The function <code>convertToXML</code> takes a <code>property</code> and a unique <code>identifier</code> to return as an XML object understood by the Color Picker Panel.</p>
    	<li>Go to <b>File &gt; Save As...</b>.</li>
    	<ol type="a">
			<li>Under <b>Save As:</b>, type in <b>ColorPicker.jsx</b>.</li>
    		<li>Save the file into the <b>Panels</b> folder under the <b>Adobe Photoshop CS5\Plug-ins\</b> folder located under:</li>
    		<ul>
				<li><b>Applications</b> for Macintosh</li>
    			<li><b>Program Files</b> for Windows</li>
    			</ul>
    		<li>Press <b>Save</b>.</li>
    		</ol>
    	<li>Close <b>ExtendScript Toolkit</b>.</li>
    	</ol>
        <span class="nextLink">Continue to <a href="colorpicker_design.html">Design the Panel</a></span>
  </div>
	<br class="clearfloat" />
</div>
</body>
</html>
